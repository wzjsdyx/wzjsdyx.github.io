<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/animal_toy_cute_doll_teddy_72.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/animal_toy_cute_doll_teddy_72.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"wzjsdyx.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="show me bug">
<meta property="og:type" content="website">
<meta property="og:title" content="芯青年">
<meta property="og:url" content="https://wzjsdyx.github.io/index.html">
<meta property="og:site_name" content="芯青年">
<meta property="og:description" content="show me bug">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Youngster">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://wzjsdyx.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>芯青年</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">芯青年</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wzjsdyx.github.io/2024/06/02/2024%E5%B9%B4%E5%BA%A6%E8%AE%A1%E5%88%92/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/animal_toy_cute_doll_teddy_256.png">
      <meta itemprop="name" content="Youngster">
      <meta itemprop="description" content="show me bug">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="芯青年">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/06/02/2024%E5%B9%B4%E5%BA%A6%E8%AE%A1%E5%88%92/" class="post-title-link" itemprop="url">2024年度计划</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-06-02 10:40:32 / 修改时间：11:08:10" itemprop="dateCreated datePublished" datetime="2024-06-02T10:40:32+08:00">2024-06-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%B9%B4%E5%BA%A6%E8%AE%A1%E5%88%92/" itemprop="url" rel="index"><span itemprop="name">年度计划</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2024/06/02/2024%E5%B9%B4%E5%BA%A6%E8%AE%A1%E5%88%92/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2024/06/02/2024%E5%B9%B4%E5%BA%A6%E8%AE%A1%E5%88%92/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          Here's something encrypted, password is required to continue reading.
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2024/06/02/2024%E5%B9%B4%E5%BA%A6%E8%AE%A1%E5%88%92/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wzjsdyx.github.io/2024/05/28/smic-auto-eflash-bist/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/animal_toy_cute_doll_teddy_256.png">
      <meta itemprop="name" content="Youngster">
      <meta itemprop="description" content="show me bug">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="芯青年">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/28/smic-auto-eflash-bist/" class="post-title-link" itemprop="url">smic auto eflash bist</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-05-28 13:36:38" itemprop="dateCreated datePublished" datetime="2024-05-28T13:36:38+08:00">2024-05-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-06-02 14:50:15" itemprop="dateModified" datetime="2024-06-02T14:50:15+08:00">2024-06-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/eflash/" itemprop="url" rel="index"><span itemprop="name">eflash</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/eflash/eflash-bist/" itemprop="url" rel="index"><span itemprop="name">eflash bist</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2024/05/28/smic-auto-eflash-bist/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2024/05/28/smic-auto-eflash-bist/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><font color=blue>相关文档学习</font></p>
<h1 id="DOC–-SMIC-Serial-Testing-Bus"><a href="#DOC–-SMIC-Serial-Testing-Bus" class="headerlink" title="DOC–&gt;SMIC Serial Testing Bus"></a>DOC–&gt;SMIC Serial Testing Bus</h1><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>The Serial Testing Bus(STB) module 用于测试如下两个eflash Macro：</p>
<ul>
<li>pfm_340sa128kx150_v1Flash Macro </li>
<li>pfm_340sa8kx150_v1Flash Macro.</li>
</ul>
<p>设计初衷是为了使用<code>JTAG接口(4PIN)</code>在<code>CP阶段</code>对Flash进行测试。</p>
<p>一个STB模块最多可以携带8个Eflash macro, SMIC能够提供测试向量和STB的netlist.</p>
<h2 id="Block-Diagram"><a href="#Block-Diagram" class="headerlink" title="Block Diagram"></a>Block Diagram</h2><h3 id="STB-in-System"><a href="#STB-in-System" class="headerlink" title="STB in System"></a>STB in System</h3><img src="/2024/05/28/smic-auto-eflash-bist/image-20240528134454779.png" class="">



<blockquote>
<p>Note:</p>
<p>1.Dut_Num field selects flash macros,Dut_Num[7:0]  &#x3D; 8’h01 means one Flash Macrois selected, Dut_Num[7:0]  &#x3D; 8’hff means eight Flash Macros are selected;</p>
<p>2.N: The NthFlash.</p>
</blockquote>
<h3 id="STB-Block-Diagram"><a href="#STB-Block-Diagram" class="headerlink" title="STB Block Diagram"></a>STB Block Diagram</h3><img src="/2024/05/28/smic-auto-eflash-bist/image-20240528135925055.png" class="">



<blockquote>
<p>Note:</p>
<p>1.JTAGController: Access all data registers (DR) and instruction registers (IR).</p>
<p>2.Register &amp; Counter: Configure timing and create the proper timing for Function Controller.</p>
<p>3.Function Controller: Exports the proper waveform for flash to execute theerase&#x2F;program&#x2F;read&#x2F;configure.</p>
<p>4.BIST Controller: Algorithmically  generates address&#x2F;data, and create pass&#x2F;fail log. </p>
<p>5.Read NVR_CFG &amp; Config:Auto configure Flash.</p>
<p>6.Erase Retry &amp; Vread:Automatically  completes Erase Retry function  and Vread.</p>
<p> 7.Cycling: Erase, program and read operation are cyclingexecuted.</p>
</blockquote>
<h3 id="Pin-Description"><a href="#Pin-Description" class="headerlink" title="Pin Description"></a>Pin Description</h3><img src="/2024/05/28/smic-auto-eflash-bist/image-20240528140950126.png" class="">



<img src="/2024/05/28/smic-auto-eflash-bist/image-20240528141012829.png" class="">



<img src="/2024/05/28/smic-auto-eflash-bist/image-20240528141033520.png" class="">





<h2 id="Block-Function-Description-of-JTAG-interface"><a href="#Block-Function-Description-of-JTAG-interface" class="headerlink" title="Block Function  Description of JTAG interface"></a>Block Function  Description of JTAG interface</h2><p>TAG interface consists of four parts: test access port (TAP), TAP controller  (state machine), an instruction register and a group of data registers.</p>
<h3 id="Test-access-port-TAP"><a href="#Test-access-port-TAP" class="headerlink" title="Test access port (TAP)"></a>Test access port (TAP)</h3><h3 id="TAP-controller-state-machine"><a href="#TAP-controller-state-machine" class="headerlink" title="TAP controller  (state machine)"></a>TAP controller  (state machine)</h3><h3 id="Signal-interface-Settings"><a href="#Signal-interface-Settings" class="headerlink" title="Signal interface Settings"></a>Signal interface Settings</h3><p><font color=red>TBD</font></p>
<h2 id="Operation-Description"><a href="#Operation-Description" class="headerlink" title="Operation  Description"></a>Operation  Description</h2><h3 id="Instruction-Group"><a href="#Instruction-Group" class="headerlink" title="Instruction Group"></a>Instruction Group</h3><p>There are sevenkindsof instructions: Setup  Instruction, FunctionInstruction, Erase Retry  Instruction, Cycling  Instruction,  Register Instruction,BISTInstruction,  Test  Mode Instruction.</p>
<h3 id="Internal-Register"><a href="#Internal-Register" class="headerlink" title="Internal Register"></a>Internal Register</h3><h4 id="STB-Register"><a href="#STB-Register" class="headerlink" title="STB Register"></a>STB Register</h4><img src="/2024/05/28/smic-auto-eflash-bist/image-20240528142039255.png" class="">



<h4 id="BIST-REG-SOC"><a href="#BIST-REG-SOC" class="headerlink" title="BIST_REG_SOC"></a>BIST_REG_SOC</h4><img src="/2024/05/28/smic-auto-eflash-bist/image-20240528142048774.png" class="">





<h3 id="Setup-Instruction"><a href="#Setup-Instruction" class="headerlink" title="Setup Instruction"></a>Setup Instruction</h3><p>The setup instruction is set the STB output pin high or low. The setup instruction may use together with other instruction for certain operation. </p>
<p>The setup instruction is consist of 8 bits, 7 bits setup ID and 1 bits instruction parameter.</p>
<p><code>All pins controlled by setup instruction  will not change until next setup instruction except “CEb”. If the chip is enable the “CEb” will change accordingly whiletest mode exit.</code></p>
<h4 id="MBIST-Mux-Setup"><a href="#MBIST-Mux-Setup" class="headerlink" title="MBIST Mux Setup"></a>MBIST Mux Setup</h4><p>The MBIST mux setup instruction  will control the <code>BIST_SEL</code>pin. </p>
<h4 id="Flash-Control-Pin-Setup"><a href="#Flash-Control-Pin-Setup" class="headerlink" title="Flash Control Pin Setup"></a>Flash Control Pin Setup</h4><p>The flash control pin setup instruction include :</p>
<p><code>PORb setup, standby setup, deep power down setup, recall setup, CFG lock setup, Vread0 setup, Vread1setup,Sread0 setup and Sread1 setup.</code> These instructions are used to<code> give the flash input a solid state</code>. Only  CEb will change while exiting the test mode. The other pins will remain constant until next setup instruction received.</p>
<h4 id="STB-Counter-Setup"><a href="#STB-Counter-Setup" class="headerlink" title="STB Counter Setup"></a>STB Counter Setup</h4><p>The STB counter setup instruction is used to switch on and off the STB counter. The execution for erase and program time is controlled by STB counter.  <code>By switching off the STB counter,  user can extend the time of erase and program, especially in test mode.</code> Please be noted that switching off the counter could only extend thetime but not shorten the time.</p>
<p><font color=red>啥意思？不懂</font></p>
<h3 id="Function-Instruction"><a href="#Function-Instruction" class="headerlink" title="Function Instruction"></a>Function Instruction</h3><p>The function instruction is used to execute certain operation, like erase, program, read and etc.</p>
<p> It can also use together with setup instruction,  test mode instruction  and BIST instruction. The function instructions consist of instruction  ID and instruction  parameter.</p>
<img src="/2024/05/28/smic-auto-eflash-bist/image-20240528143303435.png" class="">





<h3 id="Erase-Retry-Instruction"><a href="#Erase-Retry-Instruction" class="headerlink" title="Erase Retry Instruction"></a>Erase Retry Instruction</h3><img src="/2024/05/28/smic-auto-eflash-bist/image-20240528143447615.png" class="">



<h3 id="Cycling-Instruction"><a href="#Cycling-Instruction" class="headerlink" title="Cycling Instruction"></a>Cycling Instruction</h3><img src="/2024/05/28/smic-auto-eflash-bist/image-20240528143512853.png" class="">



<h3 id="Register-Instruction"><a href="#Register-Instruction" class="headerlink" title="Register Instruction"></a>Register Instruction</h3><img src="/2024/05/28/smic-auto-eflash-bist/image-20240528143604662.png" class="">



<p><font color=red>啥意思？不懂</font></p>
<h3 id="BIST-Instruction"><a href="#BIST-Instruction" class="headerlink" title="BIST Instruction"></a>BIST Instruction</h3><p>There are four kindsof BISTinstructions:  Chip BIST, Column BIST,SectorBIST and Row BIST. They can reador write all addressof the selected area. The Chip BIST andColumn BIST can only access the NVR&#x2F;MAIN array. There are three patternsfor Chip BIST(Normal, CKBD and Diagonal).</p>
<blockquote>
<ul>
<li>芯片BIST提供了三种模式来执行自测试：正常模式、CKBD模式（Checkerboard，棋盘格模式）和对角线模式。</li>
<li>这三种模式可能会应用不同的测试算法或测试模式，但它们的目标都是对selected area进行操作，并检查读取的结果是否与预期一致</li>
</ul>
</blockquote>
<img src="/2024/05/28/smic-auto-eflash-bist/image-20240528144541432.png" class="">

<img src="/2024/05/28/smic-auto-eflash-bist/image-20240528144548764.png" class="">



<h3 id="Test-Mode-Instruction"><a href="#Test-Mode-Instruction" class="headerlink" title="Test Mode Instruction"></a>Test Mode Instruction</h3><p>Test mode instruction  is for flash going into the relative basic test mode. The test mode instruction can be set one by one and normal operation can be followed. When normal operation finished, the “TM Exit” instruction  should be followed.</p>
<blockquote>
<ul>
<li>这句话表明测试模式指令用于将flash置于一种基本的测试模式中，以执行测试操作。</li>
<li>测试模式指令可以逐个设置，然后可以继续进行正常的操作</li>
</ul>
</blockquote>
<p><font color=red>啥意思？不懂</font></p>
<h1 id="DOC–-BIST-TEST-BENCH-USER-GUIDE"><a href="#DOC–-BIST-TEST-BENCH-USER-GUIDE" class="headerlink" title="DOC–&gt;BIST TEST BENCH USER GUIDE"></a>DOC–&gt;BIST TEST BENCH USER GUIDE</h1><h2 id="List-of-files-required-for-the-simulation"><a href="#List-of-files-required-for-the-simulation" class="headerlink" title="List of files required for the simulation"></a>List of files required for the simulation</h2><img src="/2024/05/28/smic-auto-eflash-bist/image-20240602112715254.png" class="">

<p><font color=blue>rtl sim和port sim使用的testbench文件不一样，需要注意</font></p>
<h2 id="Testbenchnaming-rules"><a href="#Testbenchnaming-rules" class="headerlink" title="Testbenchnaming rules"></a>Testbenchnaming rules</h2><img src="/2024/05/28/smic-auto-eflash-bist/image-20240602112747642.png" class="">



<h2 id="Waived-errors"><a href="#Waived-errors" class="headerlink" title="Waived errors"></a>Waived errors</h2><img src="/2024/05/28/smic-auto-eflash-bist/image-20240602112850662.png" class="">



<h2 id="Waived-warnings"><a href="#Waived-warnings" class="headerlink" title="Waived warnings"></a>Waived warnings</h2><img src="/2024/05/28/smic-auto-eflash-bist/image-20240602112919497.png" class="">



<h2 id="Necessary-modifyfor-interfacefile"><a href="#Necessary-modifyfor-interfacefile" class="headerlink" title="Necessary modifyfor interfacefile"></a>Necessary modifyfor interfacefile</h2><blockquote>
<p>Reason: As the synthesis netlist use ideal clock network, there will be hold violation in <code>netlist simulation</code>. In order to solve this violation, the delay should be added to all flash ADDRports and RDEN ports.If do not modify in interfacefile, verilog model will report “ERRORX-010! Timing Violation@XXns:Tah,target&#x3D;1.00ns;” and BIST read fail.</p>
</blockquote>
<p><font color=blue>netlist级别的仿真需要加上delay</font></p>
<img src="/2024/05/28/smic-auto-eflash-bist/image-20240602113148104.png" class="">



<h1 id="DOC–-eFlash-Macro-Datasheet"><a href="#DOC–-eFlash-Macro-Datasheet" class="headerlink" title="DOC–&gt;eFlash Macro Datasheet"></a>DOC–&gt;eFlash Macro Datasheet</h1><h2 id="Features"><a href="#Features" class="headerlink" title="Features"></a>Features</h2><img src="/2024/05/28/smic-auto-eflash-bist/image-20240528204543207.png" class="">



<h2 id="Product-Description"><a href="#Product-Description" class="headerlink" title="Product Description"></a>Product Description</h2><h3 id="Function-Block-Diagram"><a href="#Function-Block-Diagram" class="headerlink" title="Function Block Diagram"></a>Function Block Diagram</h3><img src="/2024/05/28/smic-auto-eflash-bist/image-20240528211323214.png" class="">

<h3 id="Pin-Description-1"><a href="#Pin-Description-1" class="headerlink" title="Pin Description"></a>Pin Description</h3><img src="/2024/05/28/smic-auto-eflash-bist/image-20240528211417759.png" class="">

<img src="/2024/05/28/smic-auto-eflash-bist/image-20240528211441687.png" class="">

<h3 id="Operation-Modes-Selection"><a href="#Operation-Modes-Selection" class="headerlink" title="Operation Modes Selection"></a>Operation Modes Selection</h3><img src="/2024/05/28/smic-auto-eflash-bist/image-20240529090046913.png" class="">

<h3 id="NVR-Redundancy-Sector-Selection"><a href="#NVR-Redundancy-Sector-Selection" class="headerlink" title="NVR,Redundancy Sector Selection"></a>NVR,Redundancy Sector Selection</h3><img src="/2024/05/28/smic-auto-eflash-bist/image-20240529090244081.png" class="">

<h3 id="Memory-Array-Configuraton"><a href="#Memory-Array-Configuraton" class="headerlink" title="Memory Array Configuraton"></a>Memory Array Configuraton</h3><img src="/2024/05/28/smic-auto-eflash-bist/image-20240529090349066.png" class="">

<h3 id="Connection-between-multiple-Flash-IP-and-Pump-IP"><a href="#Connection-between-multiple-Flash-IP-and-Pump-IP" class="headerlink" title="Connection between multiple Flash IP and Pump IP"></a>Connection between multiple Flash IP and Pump IP</h3><img src="/2024/05/28/smic-auto-eflash-bist/image-20240602144959234.png" class="">



<h3 id="ECC"><a href="#ECC" class="headerlink" title="ECC"></a>ECC</h3><h3 id="Chip-Erase"><a href="#Chip-Erase" class="headerlink" title="Chip Erase"></a>Chip Erase</h3><img src="/2024/05/28/smic-auto-eflash-bist/image-20240528205914524.png" class="">

<img src="/2024/05/28/smic-auto-eflash-bist/image-20240528210021298.png" class="">



<h3 id="Sector-Block-Erase"><a href="#Sector-Block-Erase" class="headerlink" title="Sector&#x2F;Block Erase"></a>Sector&#x2F;Block Erase</h3><img src="/2024/05/28/smic-auto-eflash-bist/image-20240528210008315.png" class="">



<h3 id="Program"><a href="#Program" class="headerlink" title="Program"></a>Program</h3><img src="/2024/05/28/smic-auto-eflash-bist/image-20240529104657371.png" class="">

<img src="/2024/05/28/smic-auto-eflash-bist/image-20240529104819187.png" class="">

<img src="/2024/05/28/smic-auto-eflash-bist/image-20240529104843799.png" class="">





<h3 id="read"><a href="#read" class="headerlink" title="read"></a>read</h3><img src="/2024/05/28/smic-auto-eflash-bist/image-20240529104433588.png" class="">



<p><font color=blue>testbench学习理解</font></p>
<h1 id="Testbench–-STB-operation-simulaiton"><a href="#Testbench–-STB-operation-simulaiton" class="headerlink" title="Testbench–&gt;STB operation simulaiton"></a>Testbench–&gt;STB operation simulaiton</h1><h2 id="chip-erase"><a href="#chip-erase" class="headerlink" title="chip erase"></a>chip erase</h2><blockquote>
<p>含义：erase entire main arrary, redundancy sectors and NVR sectors all together or seprately</p>
</blockquote>
<p><font color=red>TBD</font></p>
<p>观察STB输出的控制信号即可，不用太过关注testbench 指令</p>
<h2 id="sector-erase"><a href="#sector-erase" class="headerlink" title="sector erase"></a>sector erase</h2><h1 id="Q-A"><a href="#Q-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h1><h2 id="STB-in-System-章节中，SoC-REG的作用？"><a href="#STB-in-System-章节中，SoC-REG的作用？" class="headerlink" title="STB in System 章节中，SoC REG的作用？"></a>STB in System 章节中，SoC REG的作用？</h2><p>首先这是一个输出端口，是SoC控制寄存器，用于在flash test mode下，输出信息，让外部调节电压</p>
<p>7843项目中，将此信号连接到Standby 模块；</p>
<p><font color=red>TBD</font></p>
<h2 id="仿真地址问题"><a href="#仿真地址问题" class="headerlink" title="仿真地址问题"></a>仿真地址问题</h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wzjsdyx.github.io/2024/05/27/makefile%E8%84%9A%E6%9C%AC%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/animal_toy_cute_doll_teddy_256.png">
      <meta itemprop="name" content="Youngster">
      <meta itemprop="description" content="show me bug">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="芯青年">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/27/makefile%E8%84%9A%E6%9C%AC%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" class="post-title-link" itemprop="url">makefile脚本基础知识</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-05-27 10:31:01 / 修改时间：10:47:27" itemprop="dateCreated datePublished" datetime="2024-05-27T10:31:01+08:00">2024-05-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%84%9A%E6%9C%AC/" itemprop="url" rel="index"><span itemprop="name">脚本</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%84%9A%E6%9C%AC/makefile%E8%84%9A%E6%9C%AC/" itemprop="url" rel="index"><span itemprop="name">makefile脚本</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2024/05/27/makefile%E8%84%9A%E6%9C%AC%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2024/05/27/makefile%E8%84%9A%E6%9C%AC%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="目标和伪目标"><a href="#目标和伪目标" class="headerlink" title="目标和伪目标"></a>目标和伪目标</h1><h1 id="makefile执行顺序"><a href="#makefile执行顺序" class="headerlink" title="makefile执行顺序"></a>makefile执行顺序</h1><p>在Makefile中，当执行某个伪目标（.PHONY target）时，伪目标中的每条指令都会按顺序执行。每条指令都需要等待上一条指令执行完毕才能执行下一条指令，包括执行长时间运行的命令。</p>
<p>例如，考虑以下Makefile示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">makefile复制代码.PHONY: my_target</span><br><span class="line"></span><br><span class="line">my_target:</span><br><span class="line">    @<span class="built_in">echo</span> <span class="string">&quot;Starting process A...&quot;</span></span><br><span class="line">    @<span class="built_in">sleep</span> 5</span><br><span class="line">    @<span class="built_in">echo</span> <span class="string">&quot;Process A completed.&quot;</span></span><br><span class="line">    @<span class="built_in">echo</span> <span class="string">&quot;Starting process B...&quot;</span></span><br><span class="line">    @<span class="built_in">sleep</span> 10</span><br><span class="line">    @<span class="built_in">echo</span> <span class="string">&quot;Process B completed.&quot;</span></span><br></pre></td></tr></table></figure>

<p>在这个示例中，当执行<code>make my_target</code>时，会依次执行两个进程A和B。进程B会在进程A完成后才开始执行，因为Makefile会按顺序执行每个命令行中的命令。</p>
<p>因此，如果某个命令需要执行很长时间，后续的命令会等待它执行完成后再继续执行。</p>
<h1 id="makefile传递参数"><a href="#makefile传递参数" class="headerlink" title="makefile传递参数"></a>makefile传递参数</h1><p>要在Makefile中传递参数，你可以使用命令行参数（Makefile变量）和make命令后面的参数。下面是一个示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">makefile复制代码.PHONY: run</span><br><span class="line"></span><br><span class="line">run:</span><br><span class="line">    @<span class="built_in">mkdir</span> $(DIR)</span><br></pre></td></tr></table></figure>

<p>在这个示例中，<code>DIR</code>是一个Makefile变量，它将在make命令后面通过参数传递。你可以像这样运行make命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arduino</span><br><span class="line">复制代码</span><br><span class="line">make run DIR=my_directory</span><br></pre></td></tr></table></figure>

<p>这样，Makefile中的<code>run</code>目标会创建一个名为<code>my_directory</code>的目录。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wzjsdyx.github.io/2024/05/24/Cortex-M4-demo-SoC%E6%90%AD%E5%BB%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/animal_toy_cute_doll_teddy_256.png">
      <meta itemprop="name" content="Youngster">
      <meta itemprop="description" content="show me bug">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="芯青年">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/24/Cortex-M4-demo-SoC%E6%90%AD%E5%BB%BA/" class="post-title-link" itemprop="url">Cortex-M4 demo SoC搭建</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-05-24 09:23:38 / 修改时间：09:30:38" itemprop="dateCreated datePublished" datetime="2024-05-24T09:23:38+08:00">2024-05-24</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/SoC%E8%AE%BE%E8%AE%A1/" itemprop="url" rel="index"><span itemprop="name">SoC设计</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2024/05/24/Cortex-M4-demo-SoC%E6%90%AD%E5%BB%BA/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2024/05/24/Cortex-M4-demo-SoC%E6%90%AD%E5%BB%BA/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>使用ARM交付包 搭建一个demo的SoC</p>
<h1 id="使用的文件"><a href="#使用的文件" class="headerlink" title="使用的文件"></a>使用的文件</h1><h1 id="搭建的过程"><a href="#搭建的过程" class="headerlink" title="搭建的过程"></a>搭建的过程</h1>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wzjsdyx.github.io/2024/05/24/2-%E5%9F%BA%E4%BA%8ECortex-M%E5%A4%84%E7%90%86%E5%99%A8%E7%9A%84%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/animal_toy_cute_doll_teddy_256.png">
      <meta itemprop="name" content="Youngster">
      <meta itemprop="description" content="show me bug">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="芯青年">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/24/2-%E5%9F%BA%E4%BA%8ECortex-M%E5%A4%84%E7%90%86%E5%99%A8%E7%9A%84%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/" class="post-title-link" itemprop="url">2 基于Cortex-M处理器的系统设计</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-05-24 09:10:39 / 修改时间：09:37:34" itemprop="dateCreated datePublished" datetime="2024-05-24T09:10:39+08:00">2024-05-24</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/SoC%E8%AE%BE%E8%AE%A1/" itemprop="url" rel="index"><span itemprop="name">SoC设计</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2024/05/24/2-%E5%9F%BA%E4%BA%8ECortex-M%E5%A4%84%E7%90%86%E5%99%A8%E7%9A%84%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2024/05/24/2-%E5%9F%BA%E4%BA%8ECortex-M%E5%A4%84%E7%90%86%E5%99%A8%E7%9A%84%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="11-时钟"><a href="#11-时钟" class="headerlink" title="11 时钟"></a>11 时钟</h2><h2 id="12-复位"><a href="#12-复位" class="headerlink" title="12 复位"></a>12 复位</h2><p>需要同步复位异步释放：</p>
<blockquote>
<p>  &#x2F;&#x2F; PORESET synchroniser<br>  always @ (posedge FCLK or negedge PORESETn)<br>    if (!PORESETn)<br>      begin<br>        poreset_n_q  &lt;&#x3D; 1’b0;<br>        poreset_n_qq &lt;&#x3D; 1’b0;<br>      end<br>    else<br>      begin<br>        poreset_n_q  &lt;&#x3D; 1’b1;<br>        poreset_n_qq &lt;&#x3D; poreset_n_q;<br>      end</p>
<p>  &#x2F;&#x2F; SYSRESET synchroniser<br>  always @ (posedge FCLK or negedge SYSRESETn)<br>    if (!SYSRESETn)<br>      begin<br>        sysreset_n_q  &lt;&#x3D; 1’b0;<br>        sysreset_n_qq &lt;&#x3D; 1’b0;<br>      end<br>    else<br>      begin<br>        sysreset_n_q  &lt;&#x3D; 1’b1;<br>        sysreset_n_qq &lt;&#x3D; sysreset_n_q;<br>      end</p>
<p>  &#x2F;&#x2F; nPOTRST synchroniser<br>  always @ (posedge SWCLKTCK or negedge PORESETn)<br>    if (!PORESETn)<br>      begin<br>        po_trst_n_q  &lt;&#x3D; 1’b0;<br>        po_trst_n_qq &lt;&#x3D; 1’b0;<br>      end<br>    else<br>      begin<br>        po_trst_n_q  &lt;&#x3D; 1’b1;<br>        po_trst_n_qq &lt;&#x3D; po_trst_n_q;<br>      end</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wzjsdyx.github.io/2024/05/23/%E5%B8%83%E5%B1%80%E5%B8%83%E7%BA%BF%E7%9B%B8%E5%85%B3%E7%9A%84%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/animal_toy_cute_doll_teddy_256.png">
      <meta itemprop="name" content="Youngster">
      <meta itemprop="description" content="show me bug">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="芯青年">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/23/%E5%B8%83%E5%B1%80%E5%B8%83%E7%BA%BF%E7%9B%B8%E5%85%B3%E7%9A%84%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">布局布线相关的问题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-05-23 11:31:29 / 修改时间：11:40:13" itemprop="dateCreated datePublished" datetime="2024-05-23T11:31:29+08:00">2024-05-23</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/IC%E8%AE%BE%E8%AE%A1%E6%B5%81%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">IC设计流程</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2024/05/23/%E5%B8%83%E5%B1%80%E5%B8%83%E7%BA%BF%E7%9B%B8%E5%85%B3%E7%9A%84%E9%97%AE%E9%A2%98/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2024/05/23/%E5%B8%83%E5%B1%80%E5%B8%83%E7%BA%BF%E7%9B%B8%E5%85%B3%E7%9A%84%E9%97%AE%E9%A2%98/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>协助后端解决走线问题</p>
</blockquote>
<p>芯片上某一块区域的<code>走线资源（可以理解为走线的总长度）</code>是固定的，</p>
<p>如果floorplan不合理，导致某一块区域的走线过多，超过了限制，就会出现走线走不下去的情况；</p>
<p>因此需要根据数据流动，合理的规划floorplan！</p>
<p>如下图所示，不合理的走线会浪费走线资源：</p>
<p>在走线资源不紧张的情况下没关系，但是走线资源紧张的时候，走线就会进行不下去</p>
<img src="/2024/05/23/%E5%B8%83%E5%B1%80%E5%B8%83%E7%BA%BF%E7%9B%B8%E5%85%B3%E7%9A%84%E9%97%AE%E9%A2%98/image-20240523113753107.png" class="">


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wzjsdyx.github.io/2024/05/21/PAD%E4%B8%8A%E7%9A%84%E6%97%B6%E5%BA%8F%E7%BA%A6%E6%9D%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/animal_toy_cute_doll_teddy_256.png">
      <meta itemprop="name" content="Youngster">
      <meta itemprop="description" content="show me bug">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="芯青年">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/21/PAD%E4%B8%8A%E7%9A%84%E6%97%B6%E5%BA%8F%E7%BA%A6%E6%9D%9F/" class="post-title-link" itemprop="url">PAD上的时序约束</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-05-21 17:57:55" itemprop="dateCreated datePublished" datetime="2024-05-21T17:57:55+08:00">2024-05-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-22 11:08:46" itemprop="dateModified" datetime="2024-05-22T11:08:46+08:00">2024-05-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/DC-synthesis/" itemprop="url" rel="index"><span itemprop="name">DC synthesis</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2024/05/21/PAD%E4%B8%8A%E7%9A%84%E6%97%B6%E5%BA%8F%E7%BA%A6%E6%9D%9F/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2024/05/21/PAD%E4%B8%8A%E7%9A%84%E6%97%B6%E5%BA%8F%E7%BA%A6%E6%9D%9F/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>在PAD上创建时钟并做时序约束</p>
</blockquote>
<p>有些情况下，某个PAD上的信号除了当做数据，还需要当做时钟用；如果直接在PAD上create clock，和其相关联的逻辑，都会被当做clock进行处理；</p>
<p>例如按照如下方式设置时序约束：</p>
<img src="/2024/05/21/PAD%E4%B8%8A%E7%9A%84%E6%97%B6%E5%BA%8F%E7%BA%A6%E6%9D%9F/image-20240522103236418.png" class="">



<p>本质上只想要对cpum0_clk以及cpum1_clk设置时钟（cpum0_sys_clk&#x2F;cpum1_sys_clk不用管，原理一样），但是和PAD相关联的逻辑都会被设置成clock进行综合，显然不合理</p>
<img src="/2024/05/21/PAD%E4%B8%8A%E7%9A%84%E6%97%B6%E5%BA%8F%E7%BA%A6%E6%9D%9F/image-20240522103421691.png" class="">

<h1 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h1><p>首先有两种处理方式：<code>这涉及到PAD结构、stdcell以及DC综合命令的使用</code></p>
<h2 id="PAD结构"><a href="#PAD结构" class="headerlink" title="PAD结构"></a>PAD结构</h2><img src="/2024/05/21/PAD%E4%B8%8A%E7%9A%84%E6%97%B6%E5%BA%8F%E7%BA%A6%E6%9D%9F/image-20240522104033383.png" class="">



<h2 id="stdcell以及DC综合命令"><a href="#stdcell以及DC综合命令" class="headerlink" title="stdcell以及DC综合命令"></a>stdcell以及DC综合命令</h2><p>首先项目会从std cell库中挑选一些cell单元，例如buf，mux等，做一个有特殊例化名的module</p>
<img src="/2024/05/21/PAD%E4%B8%8A%E7%9A%84%E6%97%B6%E5%BA%8F%E7%BA%A6%E6%9D%9F/image-20240522102522941.png" class="">

<p>如上图所示：</p>
<p>1、<code>CKMUX2V4_8TH50 </code>是一个standard cell，</p>
<p>2、对其<code>使用一个dtc开头的例化名字</code>，</p>
<p>3、做wrap，形成公司内部使用的common cell</p>
<p>这样做的目的是，DC综合的时候，可以使用统一的脚本抓取dtc开头的例化名，对其设置set_dont_touch属性（本质上是针对这个cell不做处理）</p>
<h1 id="第一种处理方式"><a href="#第一种处理方式" class="headerlink" title="第一种处理方式"></a>第一种处理方式</h1><p><font color=blue>不在PAD上创建时钟，是在某一个std cell上创建时钟</font></p>
<img src="/2024/05/21/PAD%E4%B8%8A%E7%9A%84%E6%97%B6%E5%BA%8F%E7%BA%A6%E6%9D%9F/image-20240522105933180.png" class="">



<h1 id="第二种处理方式"><a href="#第二种处理方式" class="headerlink" title="第二种处理方式"></a>第二种处理方式</h1><p><font color=blue>在PAD上创建时钟，在其他PATH上打断clock</font></p>
<img src="/2024/05/21/PAD%E4%B8%8A%E7%9A%84%E6%97%B6%E5%BA%8F%E7%BA%A6%E6%9D%9F/image-20240522110522740.png" class="">

<p><code>找到红色框的dtc_cell，然后使用DC命令，将时钟属性断开</code></p>
<p>TBD：</p>
<p><font color=red>PAD上什么时候做filter？什么时候不做filter</font></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wzjsdyx.github.io/2024/05/11/ARM%E5%A4%84%E7%90%86%E5%99%A8%E7%AE%80%E4%BB%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/animal_toy_cute_doll_teddy_256.png">
      <meta itemprop="name" content="Youngster">
      <meta itemprop="description" content="show me bug">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="芯青年">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/11/ARM%E5%A4%84%E7%90%86%E5%99%A8%E7%AE%80%E4%BB%8B/" class="post-title-link" itemprop="url">1 ARM处理器简介</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-05-11 09:35:54" itemprop="dateCreated datePublished" datetime="2024-05-11T09:35:54+08:00">2024-05-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-24 09:23:53" itemprop="dateModified" datetime="2024-05-24T09:23:53+08:00">2024-05-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/SoC%E8%AE%BE%E8%AE%A1/" itemprop="url" rel="index"><span itemprop="name">SoC设计</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2024/05/11/ARM%E5%A4%84%E7%90%86%E5%99%A8%E7%AE%80%E4%BB%8B/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2024/05/11/ARM%E5%A4%84%E7%90%86%E5%99%A8%E7%AE%80%E4%BB%8B/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>不同系列处理器的关键特征</p>
<p>不同架构的M系列处理器</p>
<p>DSP？FPU?</p>
<p>DSP做什么内容？SIMD？浮点运算？</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wzjsdyx.github.io/2024/05/07/ahb-lite-slave-response/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/animal_toy_cute_doll_teddy_256.png">
      <meta itemprop="name" content="Youngster">
      <meta itemprop="description" content="show me bug">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="芯青年">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/07/ahb-lite-slave-response/" class="post-title-link" itemprop="url">ahb-lite slave response</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-05-07 20:48:32" itemprop="dateCreated datePublished" datetime="2024-05-07T20:48:32+08:00">2024-05-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-08 09:55:23" itemprop="dateModified" datetime="2024-05-08T09:55:23+08:00">2024-05-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AHB-Lite%E6%80%BB%E7%BA%BF/" itemprop="url" rel="index"><span itemprop="name">AHB-Lite总线</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2024/05/07/ahb-lite-slave-response/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2024/05/07/ahb-lite-slave-response/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Slave-transfer-responses"><a href="#Slave-transfer-responses" class="headerlink" title="Slave transfer responses"></a>Slave transfer responses</h1><p>&#x3D;&#x3D;》Master发起一次transfer之后就不能主动取消，接下来的传输过程由Slave控制；</p>
<p>&#x3D;&#x3D;》Master需要知道transfer的传输状态（chenggong&#x2F;不成功），因此Slave需要返回response</p>
<img src="/2024/05/07/ahb-lite-slave-response/image-20240508090512509.png" class="">

<p>&#x3D;&#x3D;》<font color=blue>完整的transfer response是HRESP和HREADY的组合</font></p>
<img src="/2024/05/07/ahb-lite-slave-response/image-20240508090625149.png" class="">

<h2 id="Transfer-done"><a href="#Transfer-done" class="headerlink" title="Transfer done"></a>Transfer done</h2><p><font color=blue>HRESP OK+ HREADY HIGH</font></p>
<h2 id="Transfer-pending"><a href="#Transfer-pending" class="headerlink" title="Transfer pending"></a>Transfer pending</h2><p>Slave可以在data phase插入wait states；</p>
<p>在真正response前插入wait states时，<font color=blue>HRESP OK+ HREADY LOW</font>;</p>
<ol>
<li><p>每个从设备在释放总线<code>back off the bus</code>前可以插入一定数量的等待周期，（但是必须要定义一个<code>最大的插入数量</code>）：</p>
<ul>
<li><p>这是为了处理总线上的竞争和冲突</p>
</li>
<li><p>而且也可以计算最大的laterncy</p>
</li>
</ul>
</li>
<li><p>建议每个从设备最多插入16个等待周期，以避免某个访问锁定总线导致大量时钟周期的延迟。然而，对于某些设备，比如串行启动ROM，这个建议可能不适用。因为这类设备通常只在系统启动期间访问，并且如果使用超过16个等待周期，对系统性能的影响可以忽略不计。</p>
</li>
</ol>
<blockquote>
<p>我的理解：</p>
<p>假设处理器先访问传感器和再访问存储器，</p>
<p>处理器访问传感器的时候，传感器数据可能没有ready，这个时候就需要插入等待周期；</p>
<p>在这期间，存储器不应该再占用总线资源，否则会出现竞争；</p>
</blockquote>
<img src="/2024/05/07/ahb-lite-slave-response/image-20240324164813564.png" class="">



<h2 id="ERROR-response"><a href="#ERROR-response" class="headerlink" title="ERROR response"></a>ERROR response</h2><p>&#x3D;&#x3D;》”ERROR” 响应在AHB-Lite协议中用于指示某种错误条件。通常，这表示一种保护错误，比如尝试向只读内存位置写入数据。</p>
<p>&#x3D;&#x3D;》对于 “OKAY” 响应，从设备可以在单个时钟周期内发送。对于 “ERROR” 响应，需要两个时钟周期。</p>
<ol>
<li><font color=blue>第一个周期：HRESP HIGH + HREADY LOW</font></li>
<li><font color=blue>第二个周期：HRESP HIGH + HREADY HIGH</font></li>
</ol>
<p>&#x3D;&#x3D;》因为总线的pipeline特性，才需要两个周期response error。</p>
<p>假设有这样一个情景：</p>
<ol>
<li>主设备向从设备发送一个读取请求（例如从存储器中读取数据）。</li>
<li>在第一个时钟周期内，主设备已经向总线广播了读取请求的地址。</li>
<li>然后，从设备（假设是一个只读存储器）检测到发生了错误，需要发送一个错误响应。</li>
</ol>
<p>现在，<code>问题在于，在从设备开始发送错误响应之时，主设备已经广播了下一个传输的地址。这意味着，主设备已经准备好进行下一个传输，而且总线上已经开始了新的传输流程</code>。在这种情况下，<code>如果从设备只发送一个时钟周期的错误响应，主设备可能无法及时取消下一个传输的执行。因为主设备需要一定的时间来检测到错误响应并采取相应的措施。如果主设备无法及时取消下一个传输，可能会导致错误的传输继续进行，从而造成系统错误或数据错误。</code></p>
<p><font color=blue>核心就是：发生错误的时候，协议不希望Master再继续发送transfer，而是变为IDLE状态，防止错误传输的继续进行，造成系统错误</font></p>
<p>如果Slave需要超过两个cycle来完成error response的传输，也可以在最开始插入Transfer pending，也就是wait状态。</p>
<img src="/2024/05/07/ahb-lite-slave-response/image-20240508085623441.png" class="">

<p><font color=blue>（Master可以利用第一个周期：HRESP HIGH + HREADY LOW进行处理，取消之后的transfer；第二个周期：HRESP HIGH + HREADY HIGH的时候，传输类型就可以变为IDLE）</font></p>
<blockquote>
<p> 注意：</p>
<p>如果master进行的是burst类型的传输，当slave error response的时候：</p>
<ul>
<li>master可以选择取消接下来的burst传输，（这不是严格的限制）</li>
<li>master也可以选择继续接下来的burst传输，（从协议上看，也是可以接受的）</li>
</ul>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wzjsdyx.github.io/2024/04/29/Cortex-M4%E7%AB%AF%E5%8F%A3%E4%BF%A1%E5%8F%B7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/animal_toy_cute_doll_teddy_256.png">
      <meta itemprop="name" content="Youngster">
      <meta itemprop="description" content="show me bug">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="芯青年">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/04/29/Cortex-M4%E7%AB%AF%E5%8F%A3%E4%BF%A1%E5%8F%B7/" class="post-title-link" itemprop="url">Cortex-M4端口信号</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-04-29 21:49:22" itemprop="dateCreated datePublished" datetime="2024-04-29T21:49:22+08:00">2024-04-29</time>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2024/04/29/Cortex-M4%E7%AB%AF%E5%8F%A3%E4%BF%A1%E5%8F%B7/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2024/04/29/Cortex-M4%E7%AB%AF%E5%8F%A3%E4%BF%A1%E5%8F%B7/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Youngster"
      src="/images/animal_toy_cute_doll_teddy_256.png">
  <p class="site-author-name" itemprop="name">Youngster</p>
  <div class="site-description" itemprop="description">show me bug</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">87</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">111</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Youngster</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : '3qPpN2UkBU7Q1vhWnH1WdrQZ-gzGzoHsz',
      appKey     : 'LAapaVzfFkIj1knpaWSWCNDo',
      placeholder: "Looking forward to communication.",
      avatar     : 'monsterid',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
